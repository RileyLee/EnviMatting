<h2 class="major"><span>Appendix</span></h2>
<section>
	<h3 id="lytro">A. Attempts using Lytro-Illum Camera</h3>
	<p>
		To calibrate the camera positions, we tried to use Lytro-Illum camera. It is conceptually an array of cameras taking pictures at the same time. So a single shot with Lytro camera would give u multiple perspectives from a calibrated array of cameras. Promising as it seems, our first attempt, however, was not very sucessful. Figure ?? a shows the result. 
		<figure>
			a)<img src="images/lytro/lytro-bad-result.tiff" alt="" height="166"/>
			b)<img src="images/lytro/lytro-bad-pattern-object.bmp" alt="" height="166" />
			c)<img src="images/lytro/lytro-gnd.jpg" alt="" height="166" />
			<figcaption>a) Result of Lytro camera using pattern b) compared with c) ground truth photo.</figcaption>
		</figure>
	</p>
	<p>
		The reason for this is that Lytro has bad chromatic abberation. So we analysed the chromatic abberation, obtained a better color wash pattern in Sec. ?? and tried to correct the color in Sec. ??. Nevertheless, too many colors are captured as the same in Lytro that the color correction didn't work. But we discovered that multiple patterns would help to obtain better mapping as is described in Sec. ??.
	</p>

	<h5>Lytro's Chromatic Abberation and New Pattern</h5>
	<figure style="float:right">
			a)<img src="images/lytro/lytro-old-pattern.png" alt="" height="140" />
			b)<img src="images/lytro/lytro-old-pattern-photo.tiff" alt="" height="140" />
			<br/>
			c)<img src="images/lytro/lytro-old-pattern-photo-R.jpg" alt="" height="90">
			d)<img src="images/lytro/lytro-old-pattern-photo-G.jpg" alt="" height="90" />
			e)<img src="images/lytro/lytro-old-pattern-photo-B.jpg" alt="" height="90" />
		</figure>
		
	<p>
		Colors captured by Lytro camera differ a lot from the reality. Figure ?? a) shows the pattern generated by the computer. b) is the picture taken by Lytro. The distinction is more obvious if we look at Figure ?? c-e) which shows each channels of the Lytro photo separately. Since we use a  color wash with R,G,B changes from 0 to 255 linearly, we are supposed to see a linear black and white color gradient. However, there is an obvious color cut-off in each channel. Consider the red channel, for example. Many positive values in red channels are observed as zero. Therefore, we restrained each channel of our color wash pattern to avoid the values below the cut-off, as show in fig. ??.
		
	</p>
		<figure>
			<img src="images/lytro/lytro-new-pattern.jpg" alt="" height="250" class="centered_half" />
		</figure>

	<h5>Color Correction</h5>
	<p>
		We did color correction to map the observed colors by Lytro back to the original color generated by computer. To do this, we first take pictures of color wash grids as in fig.??, where red (R) and greens (G) runs from 0 to 255 within each grid and blue (B) from different grids are 0, 10, ... 250. We then took pictures of these color washs. 
	</p>
		<figure>
			a)<img src="images/lytro/lytro-color-wash-gridA.png" alt="" class="img2"/>
			b)<img src="images/lytro/lytro-color-wash-gridB.png" alt="" class="img2" /> <br/>
			c)<img src="images/lytro/lytro-color-wash-gridA-photo.png" alt="" class="img2"/>
			d)<img src="images/lytro/lytro-color-wash-gridB-photo.tiff" alt="" class="img2"/><br/>
			e)<img src="images/lytro/lytro-color-wash-gridA-corrected.tiff" alt="" class="img2"/>
			f)<img src="images/lytro/lytro-color-wash-gridB-corrected.tiff" alt="" class="img2"/>
			<figcaption>a) and b) are two computer generated color wash images. c) and d) and photos of them taken by Lytro-Illum, respectively.</figcaption>
		</figure>
	<p>
		These patterns and pictures can give us a color map from the pattern color to the observed color by Lytro. The mapping can be considered as a cube of color, indexed by the pattern color, holding the observed colors as values. And then we interpolated the observed color to fill the whole mapping cube. More specifically, given pattern color [r,g,b] not included in our color wash, we linear interpolated it using another two colors, [r,g,b1] and [r,g,b2], with the same R and G and the closest B. Then we inverted the mapping to obtain the mapping from the observed color to the original pattern color. If multiple pattern colors map to the same observed color, we average them.
	</p>
	<p>
		<figure>
			<img  src="images/lytro/lytro-color-multiple-match.png" alt="" width = "30%" style="float:right"/>
		</figure>
		However, the color in lytro is so bad that often 100 pattern colors map to a single observed color. Fig.?? shows an example of the patterns colors that map to one observed color.
		
	</p>
		Even when we were trying to correct the pattern we used to compute the mapping, see results in Figure ?? e),f), it has obvious discontinuity and is recovered badly. Figure ?? shows the “color-corrected” images of our new pattern with and without object in the front. The black area is where no pattern colors are observed or interpolated as the captured color. Note that the black part is huge even though we have interpolated the pattern-to-observe cube.
	</p>
		<figure>
			<img src="images/lytro/lytro-corrected-new-pattern.tiff" alt=""  class="img2"/>
			<img src="images/lytro/lytro-corrected-new-pattern-object.tiff" alt=""  class="img2"/>
		</figure>

	<h5>Multiple Patterns Help to Reduce Effect of Color Abberation</h5>
	<p>
		Fig. ??b shows the result using only single corresponding pattern in 4a. Fig. ?? shows the result when both patterns are taking into account. Consider the similarity of position p1 on the cup with position p2 on the background. Let the two patterns be T1 and T2, the two pictures with object be C1, C2,  and Ti(p) (or Ci(p)) denotes the color on Ti (or Ci) at position p. We define the similarity  as 
		S(p1,p2) = cos(C1(p1), T1(p2)) + cos(C2(p1), T2(p2)). 
		Possibly, some parts that are not discernible using one pattern is told apart with another texture.
	</p>
		<figure>
			a1) <img src="images/lytro/lytro-old-pattern-object-photo.bmp" alt="" class="img2"/>
			a2) <img src="images/lytro/lytro-new-pattern-object-photo.bmp" alt="" class="img2"/><br/>
			b1) <img src="images/lytro/lytro-bad-result.tiff" alt="" class="img2"/>
			b2) <img src="images/lytro/lytro-new-pattern-result.tiff" alt="" class="img2"/>
		</figure>
		<figure>
			<img src="images/lytro/lytro-2-pattern-result.tiff" alt="" class="centered_half"/>
		</figure>
</section>